/*! 
 * MetroUI :: ChartJS - Create different charts in js
 * https://pimenov.com.ua
 *
 * Copyright 2021 Serhii Pimenov
 * Released under the MIT license
 */
!function(){"use strict";var t={width:1,lineType:"solid",color:"#e3e3e3",radius:0},i={style:"normal",family:"Helvetica, sans-serif",size:12,weight:"normal",lineHeight:1.2,color:"#000"},s=Object.assign({},i,{weight:"bold"}),e={top:0,bottom:0,left:0,right:0},a={dpi:1,height:200,width:"100%",padding:{top:40,left:40,right:40,bottom:40},margin:e,background:"#fff",color:"#000",font:i,border:t,title:{display:!0,align:"center",
// start, center, end
rtl:!1,color:"#000",text:"",font:Object.assign({},i,{weight:"bold",size:24}),padding:{top:10,bottom:10,left:10,right:10}},legend:{rtl:!1,margin:e,padding:{top:0,bottom:0,left:0,right:0},font:s,border:t,dash:[],background:"#fff",vertical:!1,position:"top-left"},tooltip:{width:"auto",background:"#fff",color:"#000",font:i,border:t,padding:{top:10,bottom:10,left:10,right:10},shadow:{shiftX:2,shiftY:2,blur:4,stretch:0,color:"rgba(0,0,0,.5)"}},boundaries:!1,colors:Object.values({aliceBlue:"#f0f8ff",antiqueWhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedAlmond:"#ffebcd",blue:"#0000ff",blueViolet:"#8a2be2",brown:"#a52a2a",burlyWood:"#deb887",cadetBlue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerBlue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkBlue:"#00008b",darkCyan:"#008b8b",darkGoldenRod:"#b8860b",darkGray:"#a9a9a9",darkGreen:"#006400",darkKhaki:"#bdb76b",darkMagenta:"#8b008b",darkOliveGreen:"#556b2f",darkOrange:"#ff8c00",darkOrchid:"#9932cc",darkRed:"#8b0000",darkSalmon:"#e9967a",darkSeaGreen:"#8fbc8f",darkSlateBlue:"#483d8b",darkSlateGray:"#2f4f4f",darkTurquoise:"#00ced1",darkViolet:"#9400d3",deepPink:"#ff1493",deepSkyBlue:"#00bfff",dimGray:"#696969",dodgerBlue:"#1e90ff",fireBrick:"#b22222",floralWhite:"#fffaf0",forestGreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#DCDCDC",ghostWhite:"#F8F8FF",gold:"#ffd700",goldenRod:"#daa520",gray:"#808080",green:"#008000",greenYellow:"#adff2f",honeyDew:"#f0fff0",hotPink:"#ff69b4",indianRed:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderBlush:"#fff0f5",lawnGreen:"#7cfc00",lemonChiffon:"#fffacd",lightBlue:"#add8e6",lightCoral:"#f08080",lightCyan:"#e0ffff",lightGoldenRodYellow:"#fafad2",lightGray:"#d3d3d3",lightGreen:"#90ee90",lightPink:"#ffb6c1",lightSalmon:"#ffa07a",lightSeaGreen:"#20b2aa",lightSkyBlue:"#87cefa",lightSlateGray:"#778899",lightSteelBlue:"#b0c4de",lightYellow:"#ffffe0",lime:"#00ff00",limeGreen:"#32dc32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumAquaMarine:"#66cdaa",mediumBlue:"#0000cd",mediumOrchid:"#ba55d3",mediumPurple:"#9370db",mediumSeaGreen:"#3cb371",mediumSlateBlue:"#7b68ee",mediumSpringGreen:"#00fa9a",mediumTurquoise:"#48d1cc",mediumVioletRed:"#c71585",midnightBlue:"#191970",mintCream:"#f5fffa",mistyRose:"#ffe4e1",moccasin:"#ffe4b5",navajoWhite:"#ffdead",navy:"#000080",oldLace:"#fdd5e6",olive:"#808000",oliveDrab:"#6b8e23",orange:"#ffa500",orangeRed:"#ff4500",orchid:"#da70d6",paleGoldenRod:"#eee8aa",paleGreen:"#98fb98",paleTurquoise:"#afeeee",paleVioletRed:"#db7093",papayaWhip:"#ffefd5",peachPuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderBlue:"#b0e0e6",purple:"#800080",rebeccaPurple:"#663399",red:"#ff0000",rosyBrown:"#bc8f8f",royalBlue:"#4169e1",saddleBrown:"#8b4513",salmon:"#fa8072",sandyBrown:"#f4a460",seaGreen:"#2e8b57",seaShell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",slyBlue:"#87ceeb",slateBlue:"#6a5acd",slateGray:"#708090",snow:"#fffafa",springGreen:"#00ff7f",steelBlue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whiteSmoke:"#f5f5f5",yellow:"#ffff00",yellowGreen:"#9acd32"}),animate:!1,onDrawLabelY:null,onDrawLabelX:null,onTooltipShow:null,onHover:null,onLeave:null};
/**
     * Simple object check.
     * @param item
     * @returns {boolean}
     */
function o(t){return t&&"object"==typeof t&&!Array.isArray(t)}
/**
     * Deep merge two objects.
     * @param target
     * @param ...sources
     */function r(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),e=1;e<i;e++)s[e-1]=arguments[e];if(!s.length)return t;var a=s.shift();if(o(t)&&o(a))for(var n in a)o(a[n])?(t[n]||Object.assign(t,{[n]:{}}),r(t[n],a[n])):Object.assign(t,{[n]:a[n]});return r(t,...s)}var n=function(t,i,s){var[e,a]=s,{align:o="left",baseLine:r="middle",color:n="#000",stroke:h="#000",font:l,angle:d=0,translate:c=[0,0]}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{style:f="normal",weight:p="normal",size:u=12,lineHeight:g=1,family:m="sans-serif"}=l,v=0,b=0;"number"==typeof c?v=b=c:Array.isArray(c)&&([v,b]=c),t.save(),t.beginPath(),t.textAlign=o,t.fillStyle=n,t.strokeStyle=h,t.font="".concat(f," ").concat(p," ").concat(u,"px/").concat(g," ").concat(m),t.translate(v,b),t.rotate(d*Math.PI/180),t.textBaseline=r;var x=i.toString().split("\n");x.map(((i,s)=>{t.fillText(i,e,a+a*s*g)})),t.closePath(),t.restore()},h=(t,i,s)=>{var e,{font:a=null}=s,o=0;if(t.save(),a){var{style:r="normal",weight:n="normal",size:h=12,lineHeight:l=1.2,family:d="sans-serif"}=a;t.font="".concat(r," ").concat(n," ").concat(h,"px/").concat(l," ").concat(d)}for(var c=0;c<i.length;c++)(e=t.measureText(i[c][0]).width)>o&&(o=e);return t.restore(),o},l=function(t,i){var[s,e,a]=i,{color:o="#000",fill:r="#fff",size:n=1,dash:h=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(h),t.lineWidth=n,t.strokeStyle=o,t.fillStyle=r,t.rect(s-a,e-a,2*a,2*a),t.fill(),t.stroke(),t.restore(),t.closePath()},d=t=>"number"==typeof t?{top:t,left:t,right:t,bottom:t}:t,c=t=>"number"==typeof t?{top:t,left:t,right:t,bottom:t}:t,f={legend(){return!0===this.options.legend.vertical?this.legendVertical():this.legendHorizontal()},legendHorizontal(){var t=this.options,i=d(t.padding),s=t.legend,e=this.ctx,a=this.legendItems;if(s&&o(s)&&a&&Array.isArray(a)&&a.length){var r,f,p,u,g=d(s.padding),m=c(s.margin),v=0;u=s.font.size/2,r=s.font.size*s.font.lineHeight,p=i.top+this.viewHeight+(s.font.size+g.top+m.top),f=i.left+g.left+m.left;for(var b=0;b<a.length;b++){var[x,y,w]=a[b];v+=h(e,[[s.showValue?"".concat(x," - ").concat(w):x]],{font:s.font})+2*u+5}v=(this.viewWidth-v)/2;for(var Y=0;Y<a.length;Y++){var[X,k,z]=a[Y],W=h(e,[[s.showValue?"".concat(X," - ").concat(z):X]],{font:s.font});f+W>this.viewWidth&&(f=i.left+g.left+m.left,p+=r),l(e,[v+f,p,u],{color:k,fill:k}),n(e,s.showValue?"".concat(X," - ").concat(z):X,[v+f+u+5,p+u/2],{color:s.font.color,stroke:s.font.color,font:t.font}),f+=u+W+20}}},legendVertical(){var t,i,s,e,a,r,f=this.options,p=f.legend,u=null!==(t=p.font)&&void 0!==t?t:f.font,g=u.size/2,m=this.ctx,v=this.legendItems,b=d(p.padding),x=c(p.margin),y=d(f.padding);if(p&&o(p)&&v&&Array.isArray(v)&&v.length){i=u.size*u.lineHeight,a=h(m,v,{font:u})+b.left+b.right+3*g+5,r=v.length*i+b.top+b.bottom+5,"top-left"===p.position?(s=b.left+x.left,e=b.top+x.top):"top-right"===p.position?(s=this.dpiWidth-a-x.right-y.right,e=b.top+x.top):"bottom-left"===p.position?(s=b.left+x.left,e=this.dpiHeight-r-b.bottom-x.bottom):(s=this.dpiWidth-a-x.right-b.right,e=this.dpiHeight-r-b.bottom-x.bottom),function(t,i){var[s,e,a,o]=i,{color:r="#fff",borderColor:n="#000",dash:h=[],size:l=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.save(),t.beginPath(),t.strokeStyle=n,t.fillStyle=r,t.setLineDash(h),t.lineWidth=l,t.clearRect(s,e,a,o),t.fillRect(s,e,a,o),l&&t.strokeRect(s,e,a,o),t.closePath(),t.restore()}(m,[s,e,a,r],{color:p.background,dash:p.dash,size:p.border.width,borderColor:p.border.color}),s+=g+5+b.left,e+=g+5+b.top;for(var w=0;w<v.length;w++){var[Y,X,k]=v[w];l(m,[s,e,g],{color:X,fill:X}),n(m,p.showValue?"".concat(Y," - ").concat(k):Y,[s+g+5,e+1],{color:p.font.color,stroke:p.font.color,font:p.font}),e+=i}}}},p={showTooltip(t,i){var s=this.options;if(this.tooltip&&(this.tooltip.remove(),this.tooltip=null),s.tooltip){var{x:e,y:a}=this.proxy.mouse,o=document.createElement("div"),r=s.onTooltipShow,n=s.tooltip.font,h=s.tooltip.shadow,l=s.tooltip.border,c=d(s.tooltip.padding);o.style.position="fixed",o.style.border="".concat(l.width,"px ").concat(l.lineType," ").concat(l.color),o.style.borderRadius="".concat(l.radius),o.style.padding="".concat(c.top,"px ").concat(c.right,"px ").concat(c.bottom,"px ").concat(c.left,"px"),o.style.background="".concat(s.tooltip.background),o.style.font="".concat(n.style," ").concat(n.weight," ").concat(n.size,"px/").concat(n.lineHeight," ").concat(n.family),o.style.boxShadow="".concat(h.shiftX,"px ").concat(h.shiftY,"px ").concat(h.blur,"px ").concat(h.color),o.innerHTML=r&&"function"==typeof r?r.apply(null,[t,i]):t,document.querySelector("body").appendChild(o),o.style.top="".concat(a-o.clientHeight-15,"px"),o.style.left="".concat(e-o.clientWidth/2-5,"px"),this.tooltip=o}}};class u{constructor(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unknown";if(this.el=document.querySelector(t),!this.el)throw new Error("You must define a selector for chart wrapper element!");this.options=r({},a,s),this.data=i,this.canvas=null,this.ctx=null,this.raf=null,this.tooltip=null,this.legendItems=[],this.chartType=e,this.rect=this.el.getBoundingClientRect(),this.canvasRect=null,this.static=!1;var o=this;this.proxy=new Proxy({},{set(){var t=Reflect.set(...arguments);return o.raf=requestAnimationFrame(o.draw.bind(o)),t}}),this.options.border&&(this.el.style.border="".concat(this.options.border.width,"px ").concat(this.options.border.lineType," ").concat(this.options.border.color)),this.calcInternalValues(),this.createCanvas(),this.addEvents()}createCanvas(){this.canvas=document.createElement("canvas"),this.el.innerHTML="",this.el.style.overflow="hidden",this.el.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.setCanvasSize(),this.canvasRect=this.canvas.getBoundingClientRect()}setCanvasSize(){var t=this.options;this.canvas.style.height=this.height+"px",this.canvas.style.width=this.width+"px",this.canvas.width=t.dpi*this.width,this.canvas.height=t.dpi*this.height}calcInternalValues(){var t,i,s=this.options,e=d(s.padding),a=this.el.getBoundingClientRect(),{width:o,height:r}=a;t=s.width.toString().includes("%")?o/100*parseInt(s.width):+s.width,i=s.height.toString().includes("%")?r/100*parseInt(s.height):+s.height,this.width=t,this.height=i,this.dpi=s.dpi,this.dpiHeight=this.dpi*i,this.dpiWidth=this.dpi*t,this.viewHeight=this.dpiHeight-(e.top+e.bottom),this.viewWidth=this.dpiWidth-(e.left+e.right),this.center=[this.dpiWidth/2,this.dpiHeight/2],this.radius=Math.min(this.viewHeight,this.viewWidth)/2}title(){var t,i=this.options.title,s=this.ctx;if(i&&i.text){var{text:e,align:a,color:o,font:r}=i;switch(a){case"center":t=this.dpiWidth/2;break;case"right":t=this.dpiWidth-5;break;default:t=5}n(s,e,[t,r.size+5],{align:i.align,color:i.color,stroke:i.color,font:i.font})}}draw(){this.clear(),this.title()}clear(){this.ctx.clearRect(0,0,this.dpiWidth,this.dpiHeight)}setData(t,i){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];void 0!==i?this.data[i].data=t:this.data=t,s&&this.resize()}setBoundaries(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=["minX","minY","minZ","maxX","maxY","maxZ","min","max"];for(var e in t)s.includes(e)&&(this[e]=t[e],this.options.boundaries[e]=t[e]);i&&this.draw()}mouseMove(t){var i=this.options.onHover,{clientX:s,clientY:e}=t.changedTouches?t.touches[0]:t;"function"==typeof i&&i.apply(null,[s,e]),this.proxy.mouse={x:s,y:e},t.cancelable&&t.preventDefault()}mouseLeave(){var t=this.options.onLeave;"function"==typeof t&&t.apply(null,[]),this.proxy.mouse=null}resize(){this.calcInternalValues(),this.setCanvasSize(),this.rect=this.el.getBoundingClientRect(),this.canvasRect=this.canvas.getBoundingClientRect(),this.draw()}addEvents(){var t=this.canvas;t.addEventListener("mousemove",this.mouseMove.bind(this)),t.addEventListener("touchmove",this.mouseMove.bind(this),{passive:!1}),t.addEventListener("mouseleave",this.mouseLeave.bind(this)),window.addEventListener("resize",this.resize.bind(this))}destroy(){var t=this.canvas;cancelAnimationFrame(this.raf),t.removeEventListener("mousemove",this.mouseMove.bind(this)),t.removeEventListener("mouseleave",this.mouseLeave.bind(this)),window.removeEventListener("resize",this.resize.bind(this))}}function g(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function m(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.push.apply(s,e)}return s}function v(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?m(Object(s),!0).forEach((function(i){g(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))}))}return t}Object.assign(u.prototype,f),Object.assign(u.prototype,p);var b={color:"#000",font:s,count:5,fixed:!1,opposite:!1,angle:0,align:"center",shift:{x:0,y:0},skip:0,showLine:!0,showLabel:!0,showMin:!0},x={line:{color:"#e3e3e3",size:1,dash:[],shortLineSize:5},label:b},y={x:x,y:v(v({},x),{},{label:v(v({},b),{},{align:"right"})})},w={size:1,color:"#bbb",dash:[5,3]},Y={color:"#7d7d7d",size:1,dash:[],factorX:5,factorY:5,outside:0},X={x:Y,y:Y},k={axis:y,cross:w,showDots:!0,accuracy:2,arrows:X},z=function(){var t,i,s,e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";if("number"==typeof o)e=o;else switch(o.toString().toLowerCase()){case"y":e=1;break;case"z":e=2;break;default:e=0}for(var r of a)s=r[e],(isNaN(t)||t>s)&&(t=s),(isNaN(i)||i<s)&&(i=s);return[t,i]},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[Math.min.apply(null,t),Math.max.apply(null,t)]},N=function(t,i){var[s,e,a]=i,{color:o="#000",fill:r="#fff",size:n=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=n,t.strokeStyle=o,t.fillStyle=r,t.arc(s,e,a,0,2*Math.PI),t.fill(),t.stroke(),t.restore(),t.closePath()},S=function(t,i){var[s,e,a]=i,{color:o="#000",fill:r="#fff",size:n=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=n,t.strokeStyle=o,t.fillStyle=r,t.moveTo(s,e-a),t.lineTo(s+a,e+a),t.lineTo(s-a,e+a),t.lineTo(s,e-a),t.fill(),t.stroke(),t.restore(),t.closePath()},M=function(t,i){var[s,e,a]=i,{color:o="#000",fill:r="#fff",size:n=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=n,t.strokeStyle=o,t.fillStyle=r,t.moveTo(s,e-a),t.lineTo(s+a,e),t.lineTo(s,e+a),t.lineTo(s-a,e),t.lineTo(s,e-a),t.fill(),t.stroke(),t.restore(),t.closePath()},D={cross(){var t=this.options,i=t.cross,s=d(t.padding),e=this.ctx,a=this.canvas.getBoundingClientRect();if(t.cross&&(!t.cross||this.proxy.mouse)){var{x:o,y:r}=this.proxy.mouse;o-=a.left,r-=a.top,o-s.left+1<0||o>this.viewWidth+s.left+1||r-s.top+1<0||r>this.viewHeight+s.top+1||(e.beginPath(),e.setLineDash(t.cross.dash),e.lineWidth=i.size,e.strokeStyle=i.color,// vertical line
e.moveTo(o,s.top),e.lineTo(o,this.viewHeight+s.top),// Horizontal line
e.moveTo(s.left,r),e.lineTo(this.viewWidth+s.left,r),e.arc(o,r,10,0,2*Math.PI),e.stroke(),e.closePath())}}},P=function(t,i){var[s,e,a,o]=i,{color:r="#000",size:n=1,dash:h=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(h),t.lineWidth=n,t.strokeStyle=r,t.moveTo(s,e),t.lineTo(a,o),t.stroke(),t.restore(),t.closePath()},T={axisX(){var t,i,s=this.ctx,e=this.options,a=d(e.padding);if(e.axis.x){var o,r,h,l,c,f,p=e.axis.x,u=p.label,g=p.line,m=p.arrow,v=null!==(t=u&&u.font)&&void 0!==t?t:e.font,b=u.count?(this.maxX-this.minX)/u.count:0,x=null!==(i=g.shortLineSize)&&void 0!==i?i:0;l=a.left,c=a.top,f=a.top+this.viewHeight+v.size+5,r=this.minX,h=0;for(var y=0;y<=u.count;y++){var w,Y,X;
// short line
if(o="number"==typeof u.fixed?r.toFixed(u.fixed):r,"function"==typeof e.onDrawLabelX&&(o=e.onDrawLabelX.apply(null,[r])),u.showLine&&P(s,[l,c,l,c+this.viewHeight],{color:g.color,size:g.size,dash:g.dash}),u.skip&&h!==u.skip)h++;else if(h=1,u.showLabel&&(y||u.showMin))P(s,[l,this.viewHeight+a.top-x,l,this.viewHeight+a.top+x],{color:m&&m.color?m.color:g.color}),// label
n(s,o.toString(),[0,0],{color:null!==(w=u.color)&&void 0!==w?w:e.color,align:u.align,font:v,translate:[l+(null!==(Y=u.shift.x)&&void 0!==Y?Y:0),f+(null!==(X=u.shift.y)&&void 0!==X?X:0)],angle:u.angle});r+=b,l=a.left+(r-this.minX)*this.ratioX}}},axisY(){var t,i,s=this.ctx,e=this.options,a=d(e.padding);if(e.axis.y){var o,r,h,l,c,f,p,u=e.axis.y,g=u.label,m=u.line,v=u.arrow,b=null!==(t=g&&g.font)&&void 0!==t?t:e.font,x=g.count?(this.maxY-this.minY)/g.count:0,y=null!==(i=m.shortLineSize)&&void 0!==i?i:0;l=a.left,f=a.left,c=this.viewHeight+a.top,r=this.minY,h=0,g.opposite?(f+=this.viewWidth+10+y,p=a.left+this.viewWidth,g.align="left"):(f-=10,p=l-y);for(var w=0;w<g.count+1;w++){var Y,X,k;
// short line
if(o="number"==typeof g.fixed?r.toFixed(g.fixed):r,"function"==typeof e.onDrawLabelY&&(o=e.onDrawLabelY.apply(null,[r])),g.showLine&&P(s,[l,c,this.viewWidth+a.left,c],{color:m.color,size:m.size,dash:m.dash}),0!==w&&g.skip&&h!==g.skip)h++;else if(h=1,g.showLabel&&(w||g.showMin))P(s,[p,c,p+2*y,c],{color:v&&v.color?v.color:m.color}),n(s,o.toString(),[0,0],{color:null!==(Y=g&&g.color)&&void 0!==Y?Y:e.color,align:g.align,font:b,translate:[f+(null!==(X=g.shift.x)&&void 0!==X?X:0),c+1+(null!==(k=g.shift.y)&&void 0!==k?k:0)],angle:g.angle});r+=x,c=a.top+this.viewHeight-(r-this.minY)*this.ratioY}}},axisXY(){if(this.options.axis)return this.axisX(),this.axisY(),this}},L={addPoint(t,i){var s,e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.options;if(!this.data){this.data=[];for(var o=0;o<t+1;o++)this.data[o]=[]}s=this.data[t],e&&s.length&&(a.graphSize?s.length>=a.graphSize&&(s=s.slice(1)):s=s.slice(1)),this.data[t]=s,this.data[t].push(i)}},H=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{color:s="#000",size:e=1,dash:a=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(a),t.lineWidth=e,t.strokeStyle=s,i.map((i=>{var[s,e]=i;t.lineTo(s,e)})),t.stroke(),t.restore(),t.closePath()},A={arrowX(){var t=this.options,i=this.ctx,s=d(t.padding);if(t.arrows.x){var e=t.arrows.x,a=s.left,o=this.viewHeight+s.top;!function(t,i){var[s,e,a,o,r,n]=i,{color:h="#000",dash:l=[],size:d=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.strokeStyle=h,t.lineWidth=d,t.setLineDash(l),t.moveTo(s,e),t.lineTo(a,o),t.moveTo(a,o),t.lineTo(a-r,o-n),t.moveTo(a,o),t.lineTo(a-r,o+n),t.stroke(),t.closePath()}(i,[a,o,s.left+this.viewWidth+e.outside,o,e.factorX,e.factorY],{color:e.color,size:e.size,dash:e.dash})}},arrowY(){var t=this.options,i=this.ctx,s=d(t.padding);if(t.arrows.y){var e=t.arrows.y,a=s.left;!function(t,i){var[s,e,a,o,r,n]=i,{color:h="#000",dash:l=[],size:d=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.strokeStyle=h,t.lineWidth=d,t.setLineDash(l),t.moveTo(s,e),t.lineTo(a,o),t.moveTo(a,o),t.lineTo(a-r,o+n),t.moveTo(a,o),t.lineTo(a+r,o+n),t.stroke(),t.closePath()}(i,[a,this.viewHeight+s.top,a,s.top-e.outside,e.factorX,e.factorY],{color:e.color,size:e.size,dash:e.dash})}},arrows(){if(this.options.arrows)return this.arrowX(),this.arrowY(),this}};class O extends u{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r({},k,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),"area"),this.coords={},this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.legendItems=[];var i=this.options.legend,s=this.options.areas,e=this.options.colors;if(i)for(var a=0;a<this.data.length;a++)this.legendItems.push([s[a].name,e[a]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var s of this.data)if(Array.isArray(s))for(var[e,a]of s)i.push([e,a]);var[o,r]=z(i,"x"),[n,h]=z(i,"y");this.minX=t.boundaries&&!isNaN(t.boundaries.minX)?t.boundaries.minX:o,this.maxX=t.boundaries&&!isNaN(t.boundaries.maxX)?t.boundaries.maxX:r,this.minY=t.boundaries&&!isNaN(t.boundaries.minY)?t.boundaries.minY:n,this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:h,isNaN(this.minX)&&(this.minX=0),isNaN(this.maxX)&&(this.maxX=100),isNaN(this.minY)&&(this.minX=0),isNaN(this.maxY)&&(this.maxX=100)}calcRatio(){this.ratioX=this.viewWidth/(this.maxX===this.minX?this.maxX:this.maxX-this.minX),this.ratioY=this.viewHeight/(this.maxY===this.minY?this.maxY:this.maxY-this.minY)}areas(){var t,i=this,s=this.options,e=d(s.padding),a=this.ctx;if(this.data&&this.data.length)for(var o=function(o){var r,n,h,d,c,f=s.areas[o],p=i.data[o],u=null!==(r=f.color)&&void 0!==r?r:s.colors[o],g=null!==(n=f.fill)&&void 0!==n?n:u;for(var[m,v]of((t=[]).push([e.left,i.viewHeight+e.top,0,0]),p)){var b=Math.floor((m-i.minX)*i.ratioX+e.left),x=Math.floor(i.viewHeight+e.top-(v-i.minY)*i.ratioY);t.push([b,x,m,v])}t.push([t[t.length-1][0],i.viewHeight+e.top,0,0]),function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{color:s="#000",fill:e="#000",size:a=1,dash:o=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(o),t.lineWidth=a,t.strokeStyle=s,t.fillStyle=e,i.map((i=>{var[s,e]=i;t.lineTo(s,e)})),t.lineTo(i[0][0],i[0][1]),t.fill(),t.restore(),t.closePath()}(a,t,{color:u,fill:g,size:f.size});var y=f.dots?f.dots:{type:"dot"},w={color:null!==(h=y.color)&&void 0!==h?h:u,fill:null!==(d=y.fill)&&void 0!==d?d:u,radius:null!==(c=y.size)&&void 0!==c?c:4},Y=void 0;switch(y.type){case"square":Y=l;break;case"triangle":Y=S;break;case"diamond":Y=M;break;default:Y=N}f.dots&&!1!==s.showDots&&t.map((t=>{var[i,s]=t;Y(a,[i,s,w.radius],w)})),i.coords[f.name]={area:f,coords:t,drawPointFn:Y,opt:w},t.shift(),t.pop(),!1!==f.showLines&&H(a,t,{color:u,fill:g,size:f.size})},r=0;r<this.data.length;r++)o(r)}floatPoint(){var t=this.options,i=this.ctx,s=this.canvas.getBoundingClientRect(),e=!1;if(this.data&&this.data.length&&this.proxy.mouse){var{x:a,y:o}=this.proxy.mouse,r=a-s.left,n=o-s.top;for(var h in this.coords){var l=this.coords[h],d=l.drawPointFn,c=l.opt;for(var[f,p,u,g]of l.coords){var m=+(t.accuracy||c.radius),v=f-m,b=f+m,x=p-m,y=p+m;if(r>v&&r<b&&"default"!==t.hoverMode&&d(i,[f,p,c.radius],{color:c.color,fill:c.fill}),r>v&&r<b&&n>x&&n<y){"default"===t.hoverMode&&d(i,[f,p,2*c.radius],{color:c.color,fill:c.fill}),t.tooltip&&(this.showTooltip([u,g],l.graph),e=!0);break}}!e&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}}}add(t,i,s,e){var[a,r]=i;this.addPoint(t,[a,r],s),this.minX=this.data[t][0][0],this.maxX=a,e?o(e)&&this.align(e):(r<this.minY&&(this.minY=r),r>this.maxY&&(this.maxY=r)),this.resize()}align(t){var{minX:i,maxX:s,minY:e,maxY:a}=t,o=[];for(var r of this.data)if(Array.isArray(r))for(var[n,h]of r)o.push([n,h]);var[l,d]=z(o,"x"),[c,f]=z(o,"y");i&&(this.minX=l),e&&(this.minY=c),s&&(this.maxX=d),a&&(this.maxY=f)}draw(){super.draw(),this.calcRatio(),this.axisXY(),this.arrows(),this.areas(),this.floatPoint(),this.cross(),this.legend()}}Object.assign(O.prototype,D),Object.assign(O.prototype,T),Object.assign(O.prototype,L),Object.assign(O.prototype,A);var C={groupDistance:0,barDistance:0,axis:v({},y),dataAxisX:!1,labels:{font:s,color:"#000"},arrows:X,onDrawLabel:null},R=function(t,i){var[s,e,a,o]=i,{color:r="#000",fill:n="#fff",size:h=1,dash:l=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(l),t.lineWidth=h,t.strokeStyle=r,t.fillStyle=n,t.rect(s,e,a,o),t.fill(),t.stroke(),t.restore(),t.closePath()};class j extends u{constructor(t,i,s){super(t,i,r({},C,s),"bar"),this.groups=0,this.barWidth=0,this.maxY=0,this.maxX=0,this.minY=0,this.minX=0,this.viewAxis=this.options.dataAxisX?this.viewHeight:this.viewWidth,this.legendItems=[];var e=this.options.legend;if(e&&e.titles&&e.titles.length)for(var a=0;a<e.titles.length;a++)this.legendItems.push([e.titles[a],this.options.colors[a]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var s in this.data)i=[].concat(i,this.data[s]);this.groups=this.data.length;var[,e]=W(i);this.maxX=this.maxY=t.boundaries&&!isNaN(t.boundaries.max)?t.boundaries.max:e,isNaN(this.maxX)&&(this.maxX=100),isNaN(this.maxY)&&(this.maxX=100)}calcRatio(){this.ratioX=this.ratioY=this.ratio=(this.options.dataAxisX?this.viewWidth:this.viewHeight)/(this.maxY===this.minY?this.maxY:this.maxY-this.minY)}calcBarWidth(){for(var t=this.options,i=0,s=0;s<this.data.length;s++)i+=Array.isArray(this.data[s])?this.data[s].length:1;var e=(t.dataAxisX?this.viewHeight:this.viewWidth)-(this.data.length+1)*t.groupDistance-(i-this.data.length)*t.barDistance;// space between bars
this.barWidth=e/i}bars(){var t,i,s,e,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=this.options,r=o.bars,h=d(o.padding),l=this.ctx,c=this.canvas.getBoundingClientRect(),f=!1;if(this.data&&this.data.length){this.proxy.mouse&&(s=this.proxy.mouse.x-c.left,e=this.proxy.mouse.y-c.top),t=a?h.left:h.left+o.groupDistance,i=a?h.top+o.groupDistance:this.viewHeight+h.top;for(var p=0;p<this.data.length;p++){for(var u=this.data[p],g=Array.isArray(u)?u:[u],m=o.labels.color,b=r[p],x=0,y=0;y<g.length;y++){var w=g[y]*this.ratio,Y=1===g.length?o.colors[p]:o.colors[y],X={color:Y,fill:Y},k=a?[t,i,t+w-h.right,this.barWidth]:[t,i-w,this.barWidth-1,w];R(l,k,X);var z=a?[t,t+w]:[t,t+this.barWidth-1],W=a?[i,i+this.barWidth-1]:[i-w,i];s>z[0]&&s<z[1]&&e>W[0]&&e<W[1]&&(R(l,k,v(v({},X),{},{fill:"rgba(255,255,255,.3)"})),o.tooltip&&(this.showTooltip([o.legend.titles?o.legend.titles[y]:b,g[y]],u),f=!0)),x+=this.barWidth+o.barDistance,a?i+=o.barDistance+this.barWidth:t+=o.barDistance+this.barWidth}a?i-=o.barDistance:t-=o.barDistance,x-=o.barDistance,"function"==typeof o.onDrawLabel&&(b=o.onDrawLabel.apply(null,b)),n(l,b,[0,0],{align:"center",color:m,stroke:m,font:o.font,angle:a?90:0,translate:a?[t-20,i-x/2]:[t-x/2,i+20]}),a?i+=o.groupDistance:t+=o.groupDistance}!f&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null),this.static=!0}}draw(){var t=this.options;super.draw(),this.calcBarWidth(),this.calcRatio(),t.dataAxisX?this.axisX():this.axisY(),this.bars(t.dataAxisX),this.arrows(),this.legend()}}Object.assign(j.prototype,T),Object.assign(j.prototype,A);var B={axis:y,cross:w,arrows:X};class I extends u{constructor(t,i,s){if(super(t,i,r({},B,s),"bubble"),this.coords={},this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.minZ=0,this.maxZ=0,this.legendItems=[],this.options.legend)for(var e=0;e<this.data.length;e++)this.legendItems.push([this.data[e].name,this.options.colors[e]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var s in this.data){var e=this.data[s].data;Array.isArray(e)&&i.push(e)}var[a,o]=z(i,"x"),[r,n]=z(i,"y"),[h,l]=z(i,"z");this.minX=t.boundaries&&!isNaN(t.boundaries.minX)?t.boundaries.minX:a,this.maxX=t.boundaries&&!isNaN(t.boundaries.maxX)?t.boundaries.maxX:o,this.minY=t.boundaries&&!isNaN(t.boundaries.minY)?t.boundaries.minY:r,this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:n,this.minZ=t.boundaries&&!isNaN(t.boundaries.minZ)?t.boundaries.minZ:h,this.maxZ=t.boundaries&&!isNaN(t.boundaries.maxZ)?t.boundaries.maxZ:l,isNaN(this.minX)&&(this.minX=0),isNaN(this.maxX)&&(this.maxX=100),isNaN(this.minY)&&(this.minX=0),isNaN(this.maxY)&&(this.maxX=100),isNaN(this.minZ)&&(this.minX=0),isNaN(this.maxZ)&&(this.maxX=100)}calcRatio(){this.ratioX=this.viewWidth/(this.maxX===this.minX?this.maxX:this.maxX-this.minX),this.ratioY=this.viewHeight/(this.maxY===this.minY?this.maxY:this.maxY-this.minY),this.ratioZ=this.maxZ/(this.maxZ===this.minZ?this.maxZ:this.maxZ-this.minZ)}bubbles(){var t=this.options,i=d(t.padding),s=this.ctx;if(this.data&&this.data.length)for(var e=0;e<this.data.length;e++){var a=this.data[e],o=t.colors[e],[r,n,h]=a.data,l=Math.floor((r-this.minX)*this.ratioX+i.left),c=Math.floor(this.viewHeight+i.top-(n-this.minY)*this.ratioY),f=Math.floor(h*this.ratioZ);N(s,[l,c,f],{fill:o,color:o})}}floatPoint(){this.data&&this.data.length}add(t,i){var[s,e,a]=i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.addPoint(t,[s,e,a],o),s<this.minX&&(this.minX=s),s>this.maxX&&(this.maxX=s),e<this.minY&&(this.minY=e),e>this.maxY&&(this.maxY=e),a<this.minZ&&(this.minZ=a),a>this.maxZ&&(this.maxZ=a),this.resize()}draw(){super.draw(),this.calcRatio(),this.axisXY(),this.arrows(),this.bubbles(),this.floatPoint(),this.cross(),this.legend()}}Object.assign(I.prototype,D),Object.assign(I.prototype,T),Object.assign(I.prototype,A);var Z={barWidth:10,axis:v(v({},y),{},{x:v(v({},y.x),{},{arrow:!1}),y:v(v({},y.y),{},{arrow:!1})}),cross:w,graphSize:40,bars:{stroke:"#fff"}};class G extends u{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r({},Z,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),"histogram"),this.coords={},this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.legendItems=[];var i=this.options.legend,s=this.options.bars,e=this.options.colors;if(i)for(var a=0;a<this.data.length;a++)this.legendItems.push([s[a].name,e[a]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var s of this.data)if(Array.isArray(s))for(var[e,a,o]of s)i.push([e,a,o]);var[r,n]=z(i,0),[h,l]=z(i,1),[d,c]=z(i,2);this.minX=t.boundaries&&!isNaN(t.boundaries.minX)?t.boundaries.minX:Math.min(r,h),this.maxX=t.boundaries&&!isNaN(t.boundaries.maxX)?t.boundaries.maxX:Math.max(n,l),this.minY=t.boundaries&&!isNaN(t.boundaries.minY)?t.boundaries.minY:d,this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:c,isNaN(this.minX)&&(this.minX=0),isNaN(this.maxX)&&(this.maxX=100),isNaN(this.minY)&&(this.minX=0),isNaN(this.maxY)&&(this.maxX=100)}calcRatio(){this.ratioX=this.viewWidth/(this.maxX===this.minX?this.maxX:this.maxX-this.minX),this.ratioY=this.viewHeight/(this.maxY===this.minY?this.maxY:this.maxY-this.minY)}bars(){var t=this.options,i=d(t.padding),s=this.ctx;if(this.data&&this.data.length)for(var e=0;e<this.data.length;e++){var a=t.bars[e],o=this.data[e],r=a.color||t.colors[e]||"#000",n=a.stroke||"#fff";for(var[h,l,c]of o){var f=Math.floor((h-this.minX)*this.ratioX+i.left),p=Math.floor((l-this.minX)*this.ratioX+i.left)-f,u=(c-this.minY)*this.ratioY,g=Math.floor(this.viewHeight+i.top-u);R(s,[f,g,p,u],{fill:r,color:n})}}}add(t,i){var[s,e,a]=i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.addPoint(t,[s,e,a],o),this.minX=this.data[t][0][0],this.maxX=e,a<this.minY&&(this.minY=a),a>this.maxY&&(this.maxY=a),this.resize()}draw(){super.draw(),this.calcRatio(),this.axisXY(),this.bars(),this.cross(),this.legend()}}Object.assign(G.prototype,D),Object.assign(G.prototype,T),Object.assign(G.prototype,L);var V={hoverMode:"default",
// default, advanced
axis:y,cross:w,showDots:!0,type:"line",
// line, curve
accuracy:2,lines:[],arrows:X},q="line",F="default";class E extends u{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r({},V,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),"line"),this.coords={},this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.legendItems=[];var i=this.options.legend,s=this.options.lines,e=this.options.colors;if(i)for(var a=0;a<s.length;a++)this.legendItems.push([s[a].name,e[a]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var s of this.data)if(Array.isArray(s))for(var[e,a]of s)i.push([e,a]);var[o,r]=z(i,"x"),[n,h]=z(i,"y");this.minX=t.boundaries&&!isNaN(t.boundaries.minX)?t.boundaries.minX:o,this.maxX=t.boundaries&&!isNaN(t.boundaries.maxX)?t.boundaries.maxX:r,this.minY=t.boundaries&&!isNaN(t.boundaries.minY)?t.boundaries.minY:n,this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:h,isNaN(this.minX)&&(this.minX=0),isNaN(this.maxX)&&(this.maxX=100),isNaN(this.minY)&&(this.minX=0),isNaN(this.maxY)&&(this.maxX=100)}calcRatio(){this.ratioX=this.viewWidth/(this.maxX===this.minX?this.maxX:this.maxX-this.minX),this.ratioY=this.viewHeight/(this.maxY===this.minY?this.maxY:this.maxY-this.minY)}lines(){var t,i=this,s=this.options,e=d(s.padding),a=this.ctx;if(this.data&&this.data.length)for(var r=function(r){var n,h,d,c=s.lines[r],f=i.data[r],p=s.colors[r],u=c.type||s.type||q;for(var[g,m]of(t=[],f)){var v=Math.floor((g-i.minX)*i.ratioX+e.left),b=Math.floor(i.viewHeight+e.top-(m-i.minY)*i.ratioY);t.push([v,b,g,m])}!1!==c.showLine&&(u!==q?function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{color:s="#000",size:e=1,dash:a=[],tension:o=.25}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(a),t.lineWidth=e,t.strokeStyle=s,t.moveTo(i[0][0],i[0][1]);for(var r=0;r<i.length-1;r++){var n=(i[r][0]+i[r+1][0])/2,h=(i[r][1]+i[r+1][1])/2,l=(n+i[r][0])/2,d=(n+i[r+1][0])/2;//let cp_y2 = (y_mid + coords[i + 1][1]) / 2;
t.quadraticCurveTo(l,i[r][1],n,h),t.quadraticCurveTo(d,i[r+1][1],i[r+1][0],i[r+1][1])}t.stroke(),t.restore(),t.closePath()}(a,t,{color:p,size:c.size}):H(a,t,{color:p,size:c.size}));var x=function(){for(var t={},i=arguments.length,s=new Array(i),e=0;e<i;e++)s[e]=arguments[e];return s.forEach((i=>{i&&o(i)&&Object.assign(t,i)})),t}({type:"circle"},s.dots,c.dots),y={color:null!==(n=x.color)&&void 0!==n?n:p,fill:null!==(h=x.fill)&&void 0!==h?h:p,radius:null!==(d=x.size)&&void 0!==d?d:2},w=void 0;switch(x.type){case"square":w=l;break;case"triangle":w=S;break;case"diamond":w=M;break;default:w=N}c.dots&&!1!==s.showDots&&t.map((t=>{var[i,s]=t;w(a,[i,s,y.radius],y)})),i.coords[c.name]={line:c,coords:t,drawPointFn:w,opt:y}},n=0;n<this.data.length;n++)r(n)}floatPoint(){var t=this.options,i=this.ctx,s=this.canvas.getBoundingClientRect(),e=!1;if(this.data&&this.data.length&&this.proxy.mouse){var{x:a,y:o}=this.proxy.mouse,r=a-s.left,n=o-s.top;for(var h in this.coords){var l=this.coords[h],d=l.drawPointFn,c=l.opt;// const graph = item.graph
for(var[f,p,u,g]of l.coords){var m=+(t.accuracy||c.radius),v=f-m,b=f+m,x=p-m,y=p+m;if(r>v&&r<b&&t.hoverMode!==F&&d(i,[f,p,c.radius],{color:c.color,fill:c.fill}),r>v&&r<b&&n>x&&n<y){t.hoverMode===F&&d(i,[f,p,2*c.radius],{color:c.color,fill:c.fill}),t.tooltip&&(this.showTooltip([u,g],l.graph),e=!0);break}}!e&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}}}add(t,i,s,e){var[a,r]=i;this.addPoint(t,[a,r],s),this.minX=this.data[t][0][0],this.maxX=a,e?o(e)&&this.align(e):(r<this.minY&&(this.minY=r),r>this.maxY&&(this.maxY=r)),this.resize()}align(t){var{minX:i,maxX:s,minY:e,maxY:a}=t,o=[];for(var r of this.data)if(Array.isArray(r))for(var[n,h]of r)o.push([n,h]);var[l,d]=z(o,"x"),[c,f]=z(o,"y");i&&(this.minX=l),e&&(this.minY=c),s&&(this.maxX=d),a&&(this.maxY=f)}draw(){super.draw(),this.calcRatio(),this.axisXY(),this.arrows(),this.lines(),this.floatPoint(),this.cross(),this.legend()}}Object.assign(E.prototype,D),Object.assign(E.prototype,T),Object.assign(E.prototype,L),Object.assign(E.prototype,A);var K={other:{color:"#eaeaea"},labels:{font:s,color:"#fff"},showValue:!1,padding:0,onDrawValue:null},J=function(t,i){var[s,e,a=4,o,r]=i,{color:n="#000",fill:h="#fff",size:l=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=l,t.strokeStyle=n,t.fillStyle=h,t.arc(s,e,a,o,r),t.lineTo(s,e),t.fill(),t.stroke(),t.restore(),t.closePath()};class Q extends u{constructor(t,i,s){super(t,i,r({},K,s),"pie"),this.total=this.data.reduce(((t,i)=>t+i),0),this.legendItems=[];var e=this.options.legend;if(e&&e.titles&&e.titles.length)for(var a=0;a<e.titles.length;a++)this.legendItems.push([e.titles[a],this.options.colors[a],this.data[a]]);this.resize()}sectors(){var t,i,s=this.ctx,e=this.options,[a,o]=this.center,r=this.radius,l=0,d=360,c=0,f="";if(this.data&&this.data.length){for(var p=0;p<this.data.length;p++){var u=this.data[p],g=e.colors[p];d=2*Math.PI*u/this.total,J(s,[a,o,r,l,l+d],{fill:g,color:g}),l+=d}l=0;for(var m=0;m<this.data.length;m++){var v,b,x=this.data[m],y=null!==(v=this.legendItems[m]&&this.legendItems[m][0])&&void 0!==v?v:"";d=2*Math.PI*x/this.total,c=0,b=Math.round(100*x/this.total),f=e.showValue?x:b+"%","function"==typeof e.onDrawValue&&(f=e.onDrawValue.apply(null,[y,x,b])),t=a+(r/2+c)*Math.cos(l+d/2),i=o+(r/2+c)*Math.sin(l+d/2);var w=h(s,[x+"%"],{font:e.labels.font});n(s,f,[t-w/2,i+e.labels.font.size/2],{color:e.labels.color,font:e.labels.font}),l+=d}}}draw(){super.draw(),this.sectors(),this.legend()}resize(){super.resize(),this.center=[this.dpiWidth/2,this.dpiHeight/2]}}var U={groupDistance:0,axis:y,dataAxisX:!1,arrows:X,onDrawLabel:null};class $ extends u{constructor(t,i,s){super(t,i,r({},U,s),"stacked-bar"),this.barWidth=0,this.maxY=0,this.maxX=0,this.minY=0,this.minX=0,this.viewAxis=this.options.dataAxisX?this.viewHeight:this.viewWidth,this.ratioX=0,this.ratioY=0,this.legendItems=[];var e=this.options.legend;if(e&&e.titles&&e.titles.length)for(var a=0;a<e.titles.length;a++)this.legendItems.push([e.titles[a],this.options.colors[a]]);this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var s in this.data){var e=this.data[s].data;i.push(e.reduce(((t,i)=>t+i),0))}var[,a]=W(i);this.maxX=this.maxY=t.boundaries&&!isNaN(t.boundaries.max)?t.boundaries.maxY:a,isNaN(this.maxX)&&(this.maxX=100),isNaN(this.maxY)&&(this.maxX=100)}calcRatio(){this.ratio=this.ratioY=this.ratioX=(this.options.dataAxisX?this.viewWidth:this.viewHeight)/(this.maxY===this.minY?this.maxY:this.maxY-this.minY)}calcBarWidth(){var t=this.options,i=this.data.length,s=(t.dataAxisX?this.viewHeight:this.viewWidth)-(this.data.length+1)*t.groupDistance;// space between groups
this.barWidth=s/i}barsX(){var t,i,s,e,a=this.options,o=d(a.padding),r=this.ctx,h=this.canvas.getBoundingClientRect(),l=!1;if(this.data&&this.data.length){this.proxy.mouse&&(s=this.proxy.mouse.x-h.left,e=this.proxy.mouse.y-h.top),t=o.left,i=o.top+a.groupDistance;var c=Array.isArray(a.colors)?a.colors:a.colors.split(",").map((t=>t.trim()));for(var f of this.data){for(var p=f.data,u=f.name,g=c.length>1?a.color:c[0],m=0,v=0;v<p.length;v++){var b=p[v]*this.ratio,x=c[v],y=c[v],w=a.values[v];R(r,[t+m,i,b,this.barWidth],{color:x,fill:y}),s>t+m&&s<t+b+m&&e>i&&e<i+this.barWidth&&(R(r,[t+m,i,b,this.barWidth-1],{color:"rgba(255,255,255,.3)",fill:"rgba(255,255,255,.3)"}),a.tooltip&&(this.showTooltip([w,p[v]],f),l=!0)),m+=b}i+=a.groupDistance+this.barWidth,"function"==typeof a.onDrawLabel&&(u=a.onDrawLabel.apply(null,u)),n(r,u,[0,0],{align:"center",color:g,stroke:g,font:a.font,translate:[t-20,i-this.barWidth/2],angle:90})}!l&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}}barsY(){var t,i,s,e,a=this.options,o=d(a.padding),r=this.ctx,h=this.canvas.getBoundingClientRect(),l=!1;if(this.data&&this.data.length){this.proxy.mouse&&(s=this.proxy.mouse.x-h.left,e=this.proxy.mouse.y-h.top),t=o.left+a.groupDistance,i=this.viewHeight+o.top;var c=Array.isArray(a.colors)?a.colors:a.colors.split(",").map((t=>t.trim()));for(var f of this.data){for(var p=f.data,u=f.name,g=c.length>1?a.color:c[0],m=0,v=0;v<p.length;v++){var b=p[v]*this.ratio,x=c[v],y=c[v],w=a.values[v];R(r,[t,i-b-m,this.barWidth,b],{color:x,fill:y}),s>t&&s<t+this.barWidth-1&&e>i-b-m&&e<i-m&&(R(r,[t,i-b-m,this.barWidth,b],{color:"rgba(255,255,255,.3)",fill:"rgba(255,255,255,.3)"}),a.tooltip&&(this.showTooltip([w,p[v]],f),l=!0)),m+=b}t+=a.groupDistance+this.barWidth,"function"==typeof a.onDrawLabel&&(u=a.onDrawLabel.apply(null,u)),n(r,u,[0,0],{align:"center",color:g,stroke:g,font:a.font,translate:[t-a.groupDistance-this.barWidth/2,i+20],angle:0})}!l&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}}draw(){var t=this.options;super.draw(),this.calcBarWidth(),this.calcRatio(),t.dataAxisX?(this.axisX(),this.barsX()):(this.axisY(),this.barsY()),this.arrows(),this.legend()}}Object.assign($.prototype,T),Object.assign($.prototype,A);var _={font:i,fixed:!1,color:"#000",angle:0,shift:{x:0,y:0}},tt={backStyle:"#a7a7a7",fillStyle:"#8f8",startFactor:.85,endFactor:.15,backWidth:32,valueWidth:32,radius:100,boundaries:{min:0,max:100},value:_,label:{min:_,max:_},padding:{left:0,right:0}},it=function(t,i){var[s,e,a,o,r]=i,{stroke:n="#000",fill:h="#fff",size:l=1,dash:d=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash(d),t.lineWidth=l,t.strokeStyle=n,t.fillStyle=h,t.arc(s,e,a,o,r),t.stroke(),t.restore(),t.closePath()},st=(t,i)=>{for(var s="#fff",e=0,a=0;a<i.length;a++){var o=i[a][0];t>=e&&t<=o&&(s=i[a][1],e=i[a][0])}return s};class et extends u{constructor(t,i,s){super(t,i,r({},tt,s),"gauge"),this.min=this.options.boundaries.min,this.max=this.options.boundaries.max,this.resize()}gauge(){var t=this.ctx,i=this.options,s=d(i.padding),[e,a]=this.center;e+=s.left,a+=s.top;var o=Math.PI,r=o*i.startFactor,h=o*(2+i.endFactor),l=i.radius*this.radius/100-i.backWidth,c=this.data[0],f=Math.round(Math.abs(100*(c-this.min)/(this.max-this.min))),p=r+(h-r)*f/100,u=f,g=[];if("function"==typeof i.onDrawValue&&(u=i.onDrawValue.apply(null,[c,f])),it(t,[e,a,l,r,h],{size:i.backWidth,stroke:i.backStyle}),"string"==typeof i.fillStyle)g.push([100,i.fillStyle]);else if(Array.isArray(i.fillStyle))for(var m of i.fillStyle)g.push(m);it(t,[e,a,l,r,p],{size:i.valueWidth,stroke:st(f,g)}),n(t,u,[0,0],{align:"center",baseLine:"middle",color:i.value.color,stroke:i.value.color,font:i.value.font||i.font,translate:[e+i.value.shift.x,a+i.value.shift.y],angle:i.value.angle}),i.label.min&&n(t,i.boundaries.min,[0,0],{align:"left",baseLine:"middle",color:i.label.min.color,stroke:i.label.min.color,font:i.label.min.font||i.font,translate:[e+l*Math.cos(r)+i.backWidth+i.label.min.shift.x,a+l*Math.sin(r)+i.label.min.shift.y],angle:0}),i.label.max&&n(t,i.boundaries.max,[0,0],{align:"right",baseLine:"middle",color:i.label.max.color,stroke:i.label.max.color,font:i.label.max.font||i.font,translate:[e+l*Math.cos(h)-i.backWidth+i.label.max.shift.x,a+l*Math.sin(h)+i.label.max.shift.y],angle:0})}draw(){super.draw(),this.gauge()}}var at={backStyle:"#a7a7a7",fillStyle:"#8f8",backWidth:100,valueWidth:100,radius:100,boundaries:{min:0,max:100},label:{font:i,fixed:!1,color:"#000",angle:0,shift:{x:0,y:0}},padding:0};class ot extends u{constructor(t,i,s){super(t,i,r({},at,s),"donut"),this.total=this.data.reduce(((t,i)=>t+i),0),this.min=this.options.boundaries.min,this.max=this.options.boundaries.max,this.legendItems=[];var e=this.options.legend;if(e&&e.titles&&e.titles.length)for(var a=0;a<e.titles.length;a++)this.legendItems.push([e.titles[a],this.options.colors[a],this.data[a]]);this.resize()}gauge(){var t=this.ctx,i=this.options,[s,e]=this.center,a=Math.PI,o=this.radius-i.backWidth/2;it(t,[s,e,o,0,2*a],{size:i.backWidth,stroke:i.backStyle});for(var r=0,h=0,l=0;l<this.data.length;l++){var d=i.colors[l],c=this.data[l];if(h=2*Math.PI*c/this.total,it(t,[s,e,o,r,r+h],{size:i.valueWidth,stroke:d}),i.label){var f,p,u,g=null!==(f=this.legendItems[l]&&this.legendItems[l][0])&&void 0!==f?f:"",m=Math.round(100*c/this.total),v=i.showValue?c:m+"%";"function"==typeof i.onDrawValue&&(v=i.onDrawValue.apply(null,[g,c,m])),p=s+o*Math.cos(r+h/2),u=e+o*Math.sin(r+h/2),n(t,v,[p,u],{color:i.label.color,font:i.label.font})}r+=h}}draw(){super.draw(),this.gauge(),this.legend()}resize(){super.resize(),this.center=[this.dpiWidth/2,this.dpiHeight/2]}}var rt={segment:{count:100,distance:4,rowDistance:4,height:"auto",radius:0},ghost:{color:"#f1f1f1"},colors:[[70,"#60a917"],[90,"#f0a30a"],[100,"#a20025"]],padding:0,margin:0},nt=function(t,i){var[s,e,a,o]=i,{color:r="#000",fill:n="#fff",size:h=1,dash:l=[],radius:d=4}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("number"==typeof d)d={tl:d,tr:d,br:d,bl:d};else{var c={tl:0,tr:0,br:0,bl:0};for(var f in c)d[f]=d[f]||c[f]}t.beginPath(),t.fillStyle=n,t.strokeStyle=r,t.moveTo(s+d.tl,e),t.lineTo(s+a-d.tr,e),t.quadraticCurveTo(s+a,e,s+a,e+d.tr),t.lineTo(s+a,e+o-d.br),t.quadraticCurveTo(s+a,e+o,s+a-d.br,e+o),t.lineTo(s+d.bl,e+o),t.quadraticCurveTo(s,e+o,s,e+o-d.bl),t.lineTo(s,e+d.tl),t.quadraticCurveTo(s,e,s+d.tl,e),t.fill(),t.stroke(),t.closePath()};class ht extends u{constructor(t,i,s){if(super(t,i,r({},rt,s),"segment"),this.min=0,this.max=100,"auto"!==this.options.segment.height){var e=this.options,a=e.segment,o=a.rowDistance*e.dpi;this.options.height=this.data.length*(o+1+a.height)}this.resize()}segments(){var t,i,s=this.ctx,e=this.options,a=e.segment,o=a.count?a.count:20,r=a.distance*e.dpi,n=a.rowDistance*e.dpi,h=this.viewWidth/o-r,l=[],c=d(e.padding),f=c.top+r;if(i="auto"===a.height?(e.height-n*this.data.length)/this.data.length:a.height,"string"==typeof e.colors)l.push([100,e.colors]);else if(Array.isArray(e.colors))for(var p of e.colors)l.push(p);for(var u=0;u<this.data.length;u++){var g=o*this.data[u]/100;t=c.left+1;for(var m=0;m<o;m++){var v=st(100*m/o,l);m<=g?nt(s,[t,f,h,i],{color:v,fill:v,radius:a.radius}):e.ghost&&nt(s,[t,f,h,i],{color:e.ghost.color,fill:e.ghost.color,radius:a.radius}),t+=h+r}f+=i+n}}setData(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.data[i]=t,s&&this.resize()}draw(){super.draw(),this.segments()}}var lt={axis:y,boundaries:{minY:0},candle:{size:1,width:"auto",white:"green",black:"red",distance:4,cutoff:!1},ghost:{stroke:"#e3e3e3",fill:"#e3e3e3"},arrows:X},dt=function(t,i){var[s,e,a,o,r,n]=i,{color:h="red",size:l=1,leg:d=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.beginPath(),t.save(),t.setLineDash([]),t.lineWidth=l,t.strokeStyle=h,t.fillStyle=h,t.moveTo(s,e),t.lineTo(s,e+a),d&&(t.moveTo(s-r/2,e),t.lineTo(s+r/2,e),t.moveTo(s-r/2,e+a),t.lineTo(s+r/2,e+a)),t.rect(s-r/2,o,r,n),t.stroke(),t.fill(),t.restore(),t.closePath()};class ct extends u{constructor(t,i,s){super(t,i,r({},lt,s),"candlesticks"),this.minY=0,this.maxY=0,this.labels=[],this.coords=[],this.calcMinMax(),this.resize()}calcMinMax(){var t=this.options,i=[];for(var s in this.labels.length=0,this.data){var[e,a,o]=this.data[s];i.push([0,a]),i.push([0,o]),this.labels.push(e)}var[r,n]=z(i,"y");this.minY=t.boundaries&&!isNaN(t.boundaries.minY)?t.boundaries.minY:r,this.maxY=t.boundaries&&!isNaN(t.boundaries.maxY)?t.boundaries.maxY:n}calcRatio(){this.ratioY=this.viewHeight/(this.maxY===this.minY?this.maxY:this.maxY-this.minY)}getCandleSize(){var t=this.options.candle,i=this.data.length;return"auto"===t.width?(this.viewWidth-2*t.distance-t.distance*(i-1))/i:t.width}candlesticks(){
// data [x, hi, low, open, close]
var t,i,s=this.ctx,e=this.options,a=e.candle,o=e.ghost,r=d(e.padding),n=this.data.length,h=this.canvas.getBoundingClientRect(),l=this.getCandleSize(),c=!1;this.proxy.mouse&&(t=this.proxy.mouse.x-h.left,i=this.proxy.mouse.y-h.top);var f=r.left+l/2+a.distance;this.coords.length=0;for(var p=0;p<n;p++){var u,g,m,v,[b,x,y,w,Y]=this.data[p],X=Y>w,k=X?a.white:a.black,z=f-l/2-a.distance/2,W=f+l/2+a.distance/2;u=r.top+this.viewHeight-(x-this.minY)*this.ratioY,g=r.top+this.viewHeight-(y-this.minY)*this.ratioY,m=r.top+this.viewHeight-(w-this.minY)*this.ratioY,v=r.top+this.viewHeight-(Y-this.minY)*this.ratioY,t>=z&&t<=W&&R(s,[z,r.top,l+a.distance,this.viewHeight],{color:o.stroke,fill:o.fill}),dt(s,[f,u,g-u,m,l,v-m],{color:k,size:a.size,leg:a.leg}),t>=z&&t<=W&&i>=u&&i<=g&&e.tooltip&&(this.showTooltip(this.data[p],{type:X}),c=!0),this.coords.push(f),f+=l+a.distance}!c&&this.tooltip&&(this.tooltip.remove(),this.tooltip=null)}axis(){var t,i;
// draw default axis Y
this.axisY();for(// draw axis X
var s=this.ctx,e=this.options,a=e.candle,o=d(e.padding),r=e.axis.x,h=r.label,l=r.line,c=r.arrow,f=null!==(t=h&&h.font)&&void 0!==t?t:e.font,p=null!==(i=l.shortLineSize)&&void 0!==i?i:0,u=this.getCandleSize(),g=o.left+u/2+a.distance,m=o.top+this.viewHeight,v=0,b=0;b<this.labels.length;b++){var x,y,w,Y=this.labels[b],X=Y;if("function"==typeof e.onDrawLabelX&&(X=e.onDrawLabelX.apply(null,[Y])),0!==b&&h.skip&&v!==h.skip)v++;else v=1,// short line
P(s,[g,m-p,g,m+p],{color:c&&c.color?c.color:l.color}),// label
n(s,X.toString(),[0,0],{color:null!==(x=h.color)&&void 0!==x?x:e.color,align:h.align,font:f,translate:[g+(null!==(y=h.shift.x)&&void 0!==y?y:0),m+f.size+5+(null!==(w=h.shift.y)&&void 0!==w?w:0)],angle:h.angle});g+=u+a.distance}}add(t){var i,[s,e,a,o,r]=t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=this.options;this.data||(this.data=[]),i=this.data,n&&i.length&&(h.graphSize?i.length>=h.graphSize&&(i=i.slice(1)):i=i.slice(1)),this.data=i,this.data.push([s,e,a,o,r]),this.calcMinMax(),this.resize()}draw(){super.draw(),this.calcRatio(),this.axis(),this.arrows(),this.candlesticks()}}Object.assign(ct.prototype,T),Object.assign(ct.prototype,p),Object.assign(ct.prototype,A);globalThis.chart={areaChart:(t,i,s)=>new O(t,i,s),barChart:(t,i,s)=>new j(t,i,s),bubbleChart:(t,i,s)=>new I(t,i,s),histogramChart:(t,i,s)=>new G(t,i,s),lineChart:(t,i,s)=>new E(t,i,s),pieChart:(t,i,s)=>new Q(t,i,s),stackedBarChart:(t,i,s)=>new $(t,i,s),gauge:(t,i,s)=>new et(t,i,s),donut:(t,i,s)=>new ot(t,i,s),segment:(t,i,s)=>new ht(t,i,s),candlestickChart:(t,i,s)=>new ct(t,i,s)}}();
