/*!
 * Christmas Balls - A Metro 4 Component v1.0.0  (https://github.com/olton/christmas-balls.git)
 * Copyright 2020 Sergey Pimenov
 * Built at 27/12/2021 20:07:18
 * Licensed under MIT
 !*/



!function(Metro,$){"use strict";var ChristmasBallsDefaultConfig={soundPath:"/sounds/",soundVolume:1,onChristmasBallsCreate:Metro.noop};Metro.christmasBallsSetup=function(options){ChristmasBallsDefaultConfig=$.extend({},ChristmasBallsDefaultConfig,options)},window.metroChristmasBallsSetup,Metro.christmasBallsSetup(window.metroChristmasBallsSetup),Metro.Component("christmas-balls",{init:function(options,elem){return this._super(elem,options,ChristmasBallsDefaultConfig,{}),this},_create:function(){var element=this.element;this.options;this._preloadSounds(),this._createStructure(),this._createEvents(),this._fireEvent("christmas-balls-create"),element.click()},_preloadSounds:function(){for(var i=1;i<=36;i++)new Audio(this.options.soundPath+"sound"+i+".mp3")},_createStructure:function(){var inner,i,f,b,element=this.element,note=(this.options,1);for(element.addClass("christmas-balls"),i=0;i<10;i++){for(element.append(inner=$("<div>").addClass("christmas-balls-inner").css({left:373*i})),b=1;b<=9;b++)$("<div>").addClass("ball ball-"+b).attr("data-note",note++).appendTo(inner);for(f=1;f<=6;f++)$("<div>").addClass("fir fir-"+f).appendTo(inner);37===note&&(note=1)}},_playSound:function(audioSrc){var o=this.options,audioSrc=o.soundPath+"sound"+audioSrc+".mp3",sound=new Audio(audioSrc);sound.volume=parseFloat(o.soundVolume),sound.addEventListener("loadeddata",function(){sound.play()})},_createEvents:function(){var that=this,element=this.element;this.options;element.find(".ball").on(Metro.events.enter,function(e){var ball=$(this),left=Metro.utils.pageXY(e).x-ball.offset().left-ball.width()/2<0;that._playSound(ball.attr("data-note")),ball.data("animated")||(ball.data("animated",!0).addClass("bounce-"+(left?"left":"right")),ball.on("animationend",function(){ball.data("animated",!1).removeClass("bounce-"+(left?"left":"right"))}))})},changeAttribute:function(attr,newValue){},destroy:function(){this.element.remove()}})}(Metro,m4q);